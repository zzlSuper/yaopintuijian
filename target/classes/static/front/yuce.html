<!doctype html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="content-type" content="no-cache, must-revalidate"/>
    <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT"/>
    <title>疾病预防信息</title>

    <link rel="stylesheet" href="css/my.css">
    <link rel="stylesheet" href="css/nav.css">
    <link href="/front/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="../end/css/element/index.css" rel="stylesheet"/>

    <style>
        [v-cloak] {
            display: none;
        }
        .ql-editor img {
            width: 600px;
        }
    </style>
</head>
<body>
<div id="wrapper" v-cloak>
    <!-- 头部开始 -->
    <div style="width: 100%; height: 30px; line-height: 30px; border-bottom: 1px solid #ccc">
        <div class="container">
            <div style="flex: 5; color: seagreen">
                你好，欢迎来到 药品智能推荐系统！
                <span v-if="user.name">
                    <span style="margin-right: 30px">欢迎您，{{user.name}}</span>
                    <a style="margin-right: 10px; color: blue" href="javascript:void(0)" @click="logout">退出</a>
                    <a v-if="isCollect" style="margin-left: 10px" href="collectInfo.html">收藏夹</a>
                </span>
                <a v-if="!(user.name)" href="/end/page/login.html" target="_blank" style="margin:0 10px; color: slateblue" >登录</a>
                <a href="/end/page/register.html" target="_blank" style="color: slateblue">注册</a>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="nx-header">
            <div style="width: 100%; height: 100px;border-bottom: 1px solid #ccc">
                <div class="col-md-12" style="height: 100px; display: flex; justify-content: left;align-items: center;
                    color: seagreen; font-size: 30px;">
                    药品智能推荐系统
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <ul style="display: flex; background-color: white; height: 30px; border-bottom: 1px solid #ccc; margin-bottom: 5px">
            <li class="nav-item"><a href="index.html">首页</a></li>
            <li class="nav-item"><a href="advertiserInfo.html">公告信息</a></li>
					<li class="nav-item"><a href="yufangInfo.html">疾病预防信息</a></li>
					<li class="nav-item"><a href="baikeInfo.html">健康百科信息</a></li>
					<li class="nav-item"><a href="yaodianInfo.html">药店信息</a></li>
					<li class="nav-item"><a href="mapInfo.html">路线导航信息</a></li>
					<li class="nav-item"><a class="active" href="yuce.html">智能预测</a></li>
            <li class="nav-item"><a href="userInfo.html">个人信息</a></li>
            <li class="nav-item" v-if="isShow"><a href="/end/page/index.html" target="_blank">进入后台系统</a>
            </li>
        </ul>
    </div>
    <!-- 头部结束 -->
    <div class="container" style="margin-top: 10px">


        <div class="comment-item">
            <div class="row mt-10">
                <div class="col-md-10 col-md-offset-1" style="text-align: center;">
                    <button class="btn btn-primary f-r" @click="add()">输入症状</button>
                    <hr>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" tabindex="-1" role="dialog" id="mod">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="modal-title">请填写信息</span>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" @click="entity={name: ''}">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">症状</label>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" v-model="entity.name" placeholder="请输入症状" id="name">
                            </div>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" @click="entity={name:''}">关闭</button>
                    <button type="button" class="btn btn-primary" @click="update()">保存</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js/jquery-1.10.2.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/vue2.6.11/axios.js"></script>
<script src="js/vue2.6.11/vue.min.js"></script>
<script src="../end/js/element/index.js"></script>

<script>
    function msg(type, msg) {
        Vue.prototype.$message({
            type: type, // success（成功）、warning（警告）, error(错误)
            message: msg,
            duration: 2000,
            offset: 100,
            center: true
        })
    }

    new Vue({
        el: '#wrapper',
        data: {
            imgWidth: '0px',
            comments: [],
            content: '',
            obj: {},
            isComment: true,
            comment: {
                content: '',
                foreignId: 0
            },
            fileSrc: '',
            user: {},
            isShow: false,
            praiseCount: 0,
            isPraise: false,
            isCollect: false,
            isThisCollect: false,
            entity: {
                name: ''
            }
        },
        created() {
            axios.get('/auth').then(res => {
                if (res.data.code === '0') {
                    this.user = res.data.data;
                    if (this.user.level === 1) {
                        this.isShow = true;
                    }
                } else {
                    this.user = null;
                }
            });

        },
        methods: {
            add() {
                if (!this.user) {
                    alert('请先登录');
                    location.href = '/end/page/login.html';
                    return;
                }
                $('#mod').modal('show');
            },
            update() {
                $('#mod').modal('hide');
                let name = this.entity.name;
                if (name.indexOf('感冒') !== -1 || name.indexOf('咳嗽') !== -1) {
                    msg('success', '记得吃感冒药，比如感康等')
                } else if (name.indexOf('发烧') !== -1 || name.indexOf('头疼') !== -1) {
                    msg('success', '如果伴随着咳嗽，可能感冒了，建议吃点感冒药')
                } else if (name.indexOf('牙齿疼') !== -1) {
                    msg('success', '建议去牙医看看')
                } else {
                    msg('success', '建议去医院看看，可以通过地图搜索路线')
                }

            },
            logout() {
                axios.get("/logout").then(res => {
                    if(res.data.code === '0') {
                        location.href = '/front/index.html';
                    } else {
                        msg('error', res.data.msg);
                    }
                })
            }
        }
    })
</script>
</body>
</html>